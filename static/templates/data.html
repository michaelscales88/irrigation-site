{% extends "base.html" %}

{% block content %}
<div class="container-fluid">
    <div class="jumbotron">
        <h1>Sensco Smart Irrigation</h1> <!--title seen on page-->

        <div class="row">
            <div class="col-md-8">
                <iframe width="800" height="600"
                        src="https://app.powerbi.com/view?r=eyJrIjoiMTdhMmI3YWYtN2Y0YS00MmFkLWFjYjAtMjg2ZjRkMTdhNDQwIiwidCI6ImIxOWMxMzRhLTE0YzktNGQ0Yy1hZjY1LWM0MjBmOTRjOGNiYiIsImMiOjN9"
                        frameborder="0" allowFullScreen></iframe>
            </div>
            <div class="col-md-4">
                <div class="row" align="right">
                    <h1> 7 Day Forecast</h1>
                    <!-- weather widget start -->
                    <a target="_blank" href="http://www.booked.net/weather/san-marcos-1573">
                        <img src="https://w.bookcdn.com/weather/picture/3_1573_1_1_137AE9_160_ffffff_333333_08488D_1_ffffff_333333_0_6.png?scode=124&domid=w209&anc_id=79467"  alt="booked.net"/>
                    </a><!-- weather widget end -->
                </div>

                <div class="row" align="right">
                    <h1> Calendar</h1>
                    <iframe id='cv_if1' src='http://cdn.instantcal.com/cvir.html?id=cv_nav1&theme=XGY&ntype=cv_datepicker&border_radius=5'
                            allowTransparency='true' scrolling='no' frameborder=0 height=200 width=200>
                    </iframe>
                </div>
            </div>
        </div>
    </div>

</div>

{% endblock %}

{% block scripts %}
{{ super() }}
<script>
    $(document).ready(function () {
        $.ajax({
            type: 'post',
            url: '/data',
            success: function (response) {
                console.log(response);
                console.log("successful!");
                // sessionStorage.setItem('access_key', response['auth_token']);
            }
        });

        let css_file = document.createElement("link");
        css_file.setAttribute("rel", "stylesheet");
        css_file.setAttribute("type", "text/css");
        css_file.setAttribute("href", 'https://s.bookcdn.com/css/w/booked-wzs-widget-275.css?v=0.0.1');
        document.getElementsByTagName("head")[0].appendChild(css_file);

        // function setWidgetData(data) {
        //     if (typeof(data) !== 'undefined' && data.results.length > 0) {
        //         for (let i = 0; i < data.results.length; ++i) {
        //             let objMainBlock = document.getElementById('m-booked-weather-bl250-36556');
        //             if (objMainBlock !== null) {
        //                 let copyBlock = document.getElementById('m-bookew-weather-copy-' + data.results[i].widget_type);
        //                 objMainBlock.innerHTML = data.results[i].html_code;
        //                 if (copyBlock !== null) objMainBlock.appendChild(copyBlock);
        //             }
        //         }
        //     } else {
        //         alert('data=undefined||data.results is empty');
        //     }
        // }
        // setWidgetData()
});

</script>
<script type="text/javascript" charset="UTF-8"
        src="https://widgets.booked.net/weather/info?action=get_weather_info&ver=6&cityID=1573&type=3&scode=124&ltid=3458&domid=w209&anc_id=89935&cmetric=0&wlangID=1&color=11161a&wwidth=250&header_color=ffffff&text_color=333333&link_color=08488D&border_form=1&footer_color=ffffff&footer_text_color=333333&transparent=0"></script>
{% endblock %}