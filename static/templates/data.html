{% extends "base.html" %}

{% block content %}
<div class="container-fluid">
    <div class="jumbotron">
        <h1>Sensco Smart Irrigation</h1> <!--title seen on page-->

        <div class="row">
            <div class="col-md-8">
                <img id="temp_v_humidity" src="/static/images/temp_v_humidity.PNG">
                <img id="SM_v_humidity" src="/static/images/SM_v_humidity.PNG"><!--imported images-->
                <img id="SM_v_temp" src="/static/images/SM_v_temp.PNG">
            </div>
            <div class="col-md-4">
                <!--the way i set this up was using three different divisions, used to achieve color and shape-->
                <header> 7 Day Forecast</header>
                <div id="actual_widget">

                    <!-- weather widget start, I copied this code from internet -->
                    <div id="m-booked-weather-bl250-36556">
                        <div class="booked-wzs-250-175 weather-customize"
                             style="background-color:#11161a;width:250px;" id="width1">
                            <div class="booked-wzs-250-175_in">
                                <div class="booked-wzs-250-175-data">
                                    <div class="booked-wzs-250-175-left-img wrz-18">
                                        <a target="_blank" href="http://www.booked.net/">
                                            <img src="//s.bookcdn.com/images/letter/logo.gif" alt="booked.net"/>
                                        </a>
                                    </div>
                                    <div class="booked-wzs-250-175-right">
                                        <div class="booked-wzs-day-deck">
                                            <div class="booked-wzs-day-val">
                                                <div class="booked-wzs-day-number"><span class="plus">+</span>71
                                                </div>
                                                <div class="booked-wzs-day-dergee">
                                                    <div class="booked-wzs-day-dergee-val">&deg;</div>
                                                    <div class="booked-wzs-day-dergee-name">F</div>
                                                </div>
                                            </div>
                                            <div class="booked-wzs-day">
                                                <div class="booked-wzs-day-d">H: <span class="plus">+</span>71&deg;
                                                </div>
                                                <div class="booked-wzs-day-n">L: <span class="plus">+</span>66&deg;
                                                </div>
                                            </div>
                                        </div>
                                        <div class="booked-wzs-250-175-info">
                                            <div class="booked-wzs-250-175-city smolest">San Marcos</div>
                                            <div class="booked-wzs-250-175-date">Saturday, 11 November</div>
                                            <div class="booked-wzs-left"><span class="booked-wzs-bottom-l">See 7-Day Forecast</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <a target="_blank" href="http://www.booked.net/weather/san-marcos-1573">
                                    <table cellpadding="0" cellspacing="0" class="booked-wzs-table-250">
                                        <tr>
                                            <td>Sun</td>
                                            <td>Mon</td>
                                            <td>Tue</td>
                                            <td>Wed</td>
                                            <td>Thu</td>
                                            <td>Fri</td>
                                        </tr>
                                        <tr>
                                            <td class="week-day-ico">
                                                <div class="wrz-sml wrzs-18"></div>
                                            </td>
                                            <td class="week-day-ico">
                                                <div class="wrz-sml wrzs-01"></div>
                                            </td>
                                            <td class="week-day-ico">
                                                <div class="wrz-sml wrzs-18"></div>
                                            </td>
                                            <td class="week-day-ico">
                                                <div class="wrz-sml wrzs-18"></div>
                                            </td>
                                            <td class="week-day-ico">
                                                <div class="wrz-sml wrzs-18"></div>
                                            </td>
                                            <td class="week-day-ico">
                                                <div class="wrz-sml wrzs-01"></div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="week-day-val"><span class="plus">+</span>71&deg;</td>
                                            <td class="week-day-val"><span class="plus">+</span>73&deg;</td>
                                            <td class="week-day-val"><span class="plus">+</span>73&deg;</td>
                                            <td class="week-day-val"><span class="plus">+</span>75&deg;</td>
                                            <td class="week-day-val"><span class="plus">+</span>79&deg;</td>
                                            <td class="week-day-val"><span class="plus">+</span>74&deg;</td>
                                        </tr>
                                        <tr>
                                            <td class="week-day-val"><span class="plus">+</span>64&deg;</td>
                                            <td class="week-day-val"><span class="plus">+</span>60&deg;</td>
                                            <td class="week-day-val"><span class="plus">+</span>64&deg;</td>
                                            <td class="week-day-val"><span class="plus">+</span>63&deg;</td>
                                            <td class="week-day-val"><span class="plus">+</span>65&deg;</td>
                                            <td class="week-day-val"><span class="plus">+</span>60&deg;</td>
                                        </tr>
                                    </table>
                                </a></div>
                        </div>
                    </div>
                </div>

                <div id="calendar">
                    <header> Calendar</header>
                    <div id="actual_calendar_widget">
                        <iframe id='cv_if1'
                                src='http://cdn.instantcal.com/cvir.html?id=cv_nav1&theme=XGY&ntype=cv_datepicker&border_radius=5'
                                allowTransparency='true' scrolling='no' frameborder=0 height=200 width=200></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

{% endblock %}

{% block scripts %}
{{ super() }}
<script>
    $(document).ready(function () {
        $.ajax({
            type: 'post',
            url: '/data',
            success: function (response) {
                console.log(response);
                console.log("successful!");
                // sessionStorage.setItem('access_key', response['auth_token']);
            }
        });

        let css_file = document.createElement("link");
        css_file.setAttribute("rel", "stylesheet");
        css_file.setAttribute("type", "text/css");
        css_file.setAttribute("href", 'https://s.bookcdn.com/css/w/booked-wzs-widget-275.css?v=0.0.1');
        document.getElementsByTagName("head")[0].appendChild(css_file);

        // function setWidgetData(data) {
        //     if (typeof(data) !== 'undefined' && data.results.length > 0) {
        //         for (let i = 0; i < data.results.length; ++i) {
        //             let objMainBlock = document.getElementById('m-booked-weather-bl250-36556');
        //             if (objMainBlock !== null) {
        //                 let copyBlock = document.getElementById('m-bookew-weather-copy-' + data.results[i].widget_type);
        //                 objMainBlock.innerHTML = data.results[i].html_code;
        //                 if (copyBlock !== null) objMainBlock.appendChild(copyBlock);
        //             }
        //         }
        //     } else {
        //         alert('data=undefined||data.results is empty');
        //     }
        // }
        // setWidgetData()
});

</script>
<script type="text/javascript" charset="UTF-8"
        src="https://widgets.booked.net/weather/info?action=get_weather_info&ver=6&cityID=1573&type=3&scode=124&ltid=3458&domid=w209&anc_id=89935&cmetric=0&wlangID=1&color=11161a&wwidth=250&header_color=ffffff&text_color=333333&link_color=08488D&border_form=1&footer_color=ffffff&footer_text_color=333333&transparent=0"></script>
{% endblock %}